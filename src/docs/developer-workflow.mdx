import { Meta } from '@storybook/blocks';

<Meta title="Docs/Developer Workflow" />

# Developer Workflow

## Component Development Flow

Follow this four-step cycle when building or modifying components:

1. **Create the component** — write the React component with TypeScript types and Tailwind styles.
2. **Write the story** — add a Storybook story that demonstrates all variants and states.
3. **Write tests** — add unit tests (Vitest + RTL) and interaction tests (Storybook `play` functions).
4. **Review in Storybook** — visually verify the component, test interactions, and check the docs page.

## AI-Assisted Workflow

When using Claude Code to build components, try this order for the best results:

1. **Story first** — describe the component API and variants you want in a story file. This gives the AI a clear contract to implement against.
2. **Component second** — ask the AI to implement the component to satisfy the story.
3. **Tests last** — generate unit and interaction tests based on the finalized component behavior.

Tips:

- Provide the AI with an existing story file as a reference for the project conventions.
- Ask the AI to run `npm test` after writing tests to catch issues immediately.
- Use `make check` to run linting and type-checking before committing.

## Running Tests Locally

**Unit tests** (Vitest + React Testing Library):

```bash
npm test              # Run once
npm run test:watch    # Watch mode
npm run test:coverage # With coverage report
```

**Storybook interaction tests** (Playwright-based test runner):

```bash
# Start Storybook in one terminal
npm run storybook

# Run tests in another terminal
npm run test:storybook
```

Or use the Makefile:

```bash
make test             # Unit tests
make test-storybook   # Storybook interaction tests
```

## CI Pipeline

Every push triggers the CI workflow (`.github/workflows/ci.yml`) which runs:

1. `npm ci` — install dependencies
2. `npm run lint` — ESLint with zero warnings
3. `npx tsc --noEmit` — TypeScript type checking
4. `npm run test` — Vitest unit tests
5. `npm run build-storybook` — build the static Storybook
6. Storybook test runner — Playwright-based interaction tests against the built Storybook

Pushes to `main` also trigger:

- **Publish** — builds and publishes the library to GitHub Packages
- **Deploy** — deploys the built Storybook to GitHub Pages
